{% extends "@UmcCore/base.html.twig" %}
{% block additional_fixed_top %}
    {{ parent() }}
    <button type="button" class="btn btn-danger" data-bind="{click: submitForm}">Save Default Settings</button>
{% endblock %}
{% block body %}
    <form id="settings" action="{{ saveUrl }}" method="post">
        <div class="card">
            <div class="card-header">
                <h3>{{ title }}</h3>
            </div>
            <div class="card-body">
                {% for key, form in config %}
                    {% if form.fields|length > 0 %}
                    <div class="card">
                        <div class="card-header">
                            <h2>{{ form.settings_label }}</h2>
                        </div>
                        <div class="card-body">
                            {% include '@UmcCore/settings/form.html.twig' with {form: form, formKey:key} %}
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
            <div class="card-footer"></div>
        </div>
    </form>
    {% include '@UmcCore/modal.html.twig' with {id: "response-modal"} %}
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('ko/ko.js') }}"> </script>
    <script type="text/javascript" src="{{ asset('jquery/form-validator.js') }}"> </script>
{#    <script type="text/javascript" src="{{ asset('select2/select2.js') }}"> </script>#}
    <script type="text/javascript" src="{{ asset('umc/settings.js') }}"> </script>
{#    <script type="text/javascript">#}
{#        $.fn.select2.defaults.set( "theme", "bootstrap" );#}
{#    </script>#}
    <script type="text/javascript">
        ko.applyBindings(new UMC.Settings({{ values|json_encode|raw }}, {{ fields|json_encode|raw }}));
        // jQuery(document).ready(function ($) {
        //     $('[data-pretty-select=true]').select2({ width: '100%' });
        // });
    </script>
{% endblock %}
