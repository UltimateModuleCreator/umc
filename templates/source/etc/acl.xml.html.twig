<?xml version="1.0"?>{{ module.getFormattedLicense('xml')|raw }}
{% set aclParents = module.getAclMenuParents() %}
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Acl/etc/acl.xsd">
    <acl>
        <resources>
            <resource id="Magento_Backend::admin">
{% for index, parent in aclParents %}
            {% for i in range(0, index) %}    {% endfor %}<resource id="{{ parent }}">
{% endfor %}
            {% for i in range(0, aclParents|length) %}    {% endfor %}<resource id="{{ module.getData('namespace') }}_{{module.getData('module_name') }}::{{module.getData('module_name')|lower }}" title="{{ module.getData('menu_text') }}" sortOrder="{{ module.getData('sort_order') }}">
{% for entity in module.getEntities() %}
                {% for i in range(0, aclParents|length) %}    {% endfor %}<resource id="{{ module.getData('namespace') }}_{{module.getData('module_name') }}::{{module.getData('module_name')|lower }}_{{ entity.getData('name_singular')|snake }}" title="{{ entity.getData('label_plural') }}"/>
{% endfor %}
            {% for i in range(0, aclParents|length) %}    {% endfor %}</resource>
{% for index, parent in aclParents %}
            {% for i in range(0, aclParents|length - index - 1) %}    {% endfor %}</resource>
{% endfor %}
            </resource>
        </resources>
    </acl>
</config>
